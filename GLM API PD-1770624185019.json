{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "enable": false,
        "expr": "sum(changes(kube_pod_container_status_restarts_total{region=~\"$region\",pod=~\"$app-lb.*|$app-router.*|$app-.*\",pod!~\".*-(staging|test)-.*\",namespace!~\"infra|.*juicefs.*|default|cert-manager|gpu-operator|ipo|keda|kube.*|monitoring|network.*|teleport-cluster|traefik|victoria-logs|volcano-system|velero|px-operator|pl|olm\"}[$__interval] > 0 )) by(region,pod) > 0",
        "filter": {
          "exclude": false,
          "ids": [
            39,
            36,
            665,
            666
          ]
        },
        "hide": false,
        "iconColor": "yellow",
        "name": "restart",
        "tagKeys": "region,pod",
        "textFormat": "{{region}} {{pod}} restarted"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "enable": false,
        "expr": "sum(\n              (\n                (\n                  kube_pod_container_status_restarts_total\n                    -\n                  (kube_pod_container_status_restarts_total offset 1m)\n                )\n                  >=\n                1\n              )\n                and ignoring(reason)\n              (\n                min_over_time(\n                  kube_pod_container_status_last_terminated_reason{reason=\"OOMKilled\",region=~\"$region\",pod=~\"$app.*\",pod!~\".*-(staging|test)-.*\",namespace=\"$namespace\",namespace!~\"infra|juicefs|default|cert-manager|gpu-operator|ipo|keda|kube.*|monitoring|network.*|teleport-cluster|traefik|victoria-logs|volcano-system|velero|px-operator|pl|olm\"}[1m]\n                )\n                  ==\n                1\n              )\n            ) by(region,pod)",
        "filter": {
          "exclude": false,
          "ids": [
            39,
            665,
            36
          ]
        },
        "hide": false,
        "iconColor": "red",
        "name": "oom",
        "tagKeys": "region,pod",
        "textFormat": "{{region}} {{pod}} OOM",
        "titleFormat": ""
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "enable": false,
        "expr": "(\n                (count(\n                  sum(\n                    kube_pod_status_phase{\n                      job=\"kube-state-metrics\",phase=\"Pending\",namespace=\"$namespace\",region=~\"$region\",namespace!~\"infra|juicefs|default|cert-manager|gpu-operator|ipo|keda|kube.*|monitoring|network.*|teleport-cluster|traefik|victoria-logs|volcano-system|velero|px-operator|pl|olm\"\n                    }\n                      >\n                    0\n                  ) by(region,pod,namespace)\n                    * on(region,pod,namespace) group_left(workload)\n                  namespace_workload_pod:kube_pod_info:enriched{workload=~\"$app\"}\n                ) by(region,namespace,workload) > 0)\n                  / on(region,namespace,workload)\n                (\n                  count(\n                    sum(\n                      kube_pod_status_phase{\n                        job=\"kube-state-metrics\",namespace=\"$namespace\",region=~\"$region\",phase=\"Running\"\n                      }\n                    ) by(region,pod,namespace)\n                      * on(region,pod,namespace) group_left(workload)\n                    namespace_workload_pod:kube_pod_info:enriched\n                  ) by(region,namespace,workload)\n                    >\n                  0\n                )\n              )\n                >\n              0.1",
        "filter": {
          "exclude": false,
          "ids": [
            28
          ]
        },
        "hide": false,
        "iconColor": "purple",
        "name": "pending",
        "tagKeys": "region,workload",
        "textFormat": "{{workload}} pending副本数超过10%",
        "titleFormat": ""
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 555,
  "links": [
    {
      "asDropdown": false,
      "icon": "dashboard",
      "includeVars": false,
      "keepTime": true,
      "tags": [],
      "targetBlank": true,
      "title": "Model Gateway",
      "tooltip": "",
      "type": "link",
      "url": "https://grafana-monitor.chatglm.cn/d/model-gateway/model-gateway"
    },
    {
      "asDropdown": false,
      "icon": "dashboard",
      "includeVars": false,
      "keepTime": true,
      "tags": [],
      "targetBlank": true,
      "title": "Model Router",
      "tooltip": "",
      "type": "link",
      "url": "https://grafana-monitor.chatglm.cn/d/model-router/model-router-vm"
    },
    {
      "asDropdown": false,
      "icon": "dashboard",
      "includeVars": false,
      "keepTime": false,
      "tags": [],
      "targetBlank": false,
      "title": "CogVideo",
      "tooltip": "",
      "type": "link",
      "url": "https://grafana-monitor.chatglm.cn/d/cogvideo/cogvideox-api"
    },
    {
      "asDropdown": false,
      "icon": "external link",
      "includeVars": false,
      "keepTime": false,
      "tags": [],
      "targetBlank": true,
      "title": "EmbeddingAPI",
      "tooltip": "",
      "type": "link",
      "url": "https://grafana-monitor.chatglm.cn/d/embedding-api/embedding-api-vm?orgId=1"
    },
    {
      "asDropdown": false,
      "icon": "dashboard",
      "includeVars": true,
      "keepTime": true,
      "tags": [],
      "targetBlank": true,
      "title": "HPA",
      "tooltip": "",
      "type": "link",
      "url": " https://grafana-monitor.chatglm.cn/d/keda/kubernetes-autoscaling-horitzontal-pod-autoscale"
    }
  ],
  "panels": [
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 54,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 1
          },
          "id": 53,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_requests:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region)",
              "hide": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]\n    )\n) by (region)\nOR\nsum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",exported_endpoint=~\"prefill:.*\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "timeFrom": "24h",
          "title": "QPS",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "bars",
                "fillOpacity": 100,
                "gradientMode": "hue",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "purple"
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.stacking",
                    "value": {
                      "group": "A",
                      "mode": "none"
                    }
                  },
                  {
                    "id": "custom.drawStyle",
                    "value": "points"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 1
          },
          "hideTimeOverride": false,
          "id": 55,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[1d] offset -1d\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "interval": "1d",
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(increase(glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[1d]))",
              "format": "time_series",
              "hide": false,
              "instant": true,
              "interval": "1h",
              "legendFormat": "predict",
              "range": false,
              "refId": "A"
            }
          ],
          "timeFrom": "7d",
          "title": "Daily Requests",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "bars",
                "fillOpacity": 100,
                "gradientMode": "hue",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "purple"
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.drawStyle",
                    "value": "points"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 1
          },
          "hideTimeOverride": false,
          "id": 687,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_prompt_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[1d] offset -1d\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "interval": "1d",
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(increase(glm_prompt_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[1d]))",
              "hide": false,
              "instant": true,
              "interval": "1h",
              "legendFormat": "predict",
              "range": false,
              "refId": "A"
            }
          ],
          "timeFrom": "7d",
          "title": "Prompt  Tokens",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "bars",
                "fillOpacity": 100,
                "gradientMode": "hue",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "purple"
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.drawStyle",
                    "value": "points"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 1
          },
          "hideTimeOverride": false,
          "id": 688,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_generate_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[1d] offset -1d\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "interval": "1d",
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(increase(glm_generate_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[1d]))",
              "hide": false,
              "instant": true,
              "interval": "1h",
              "legendFormat": "predict",
              "range": false,
              "refId": "A"
            }
          ],
          "timeFrom": "7d",
          "title": "Generated Tokens",
          "type": "timeseries"
        }
      ],
      "title": "Overview",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 18,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "max": 1,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.001
                  },
                  {
                    "color": "red",
                    "value": 0.1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 0,
            "y": 2
          },
          "id": 61,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    sum(\n        rate(\n            glm_failed_requests\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$interval]\n        )\n    ) \n    / \n    sum(\n        rate(\n            glm_requests\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$interval]\n        )\n    )\n) OR on() vector(0)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Error",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The portion of ready tgi endpoints.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 2,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red"
                  },
                  {
                    "color": "orange",
                    "value": 0.3
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  },
                  {
                    "color": "green",
                    "value": 0.8
                  },
                  {
                    "color": "dark-green",
                    "value": 1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 3,
            "y": 2
          },
          "id": 41,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    max(\n        glm_ready_endpoints:count:exported_endpoint\n        {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n    ) by (job)\n) \n/ \nsum(\n    max(\n        glm_watched_endpoints:count:exported_endpoint\n        {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n    ) by (job)\n)",
              "hide": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(count by (job,exported_endpoint) (glm_ready_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}))\n/\nsum(count by (job,exported_endpoint) (glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}))",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Health",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 3,
            "x": 6,
            "y": 2
          },
          "id": 62,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_incoming_requests{region=~\"$region\",job=~\"$namespace/$app-lb\"}\n    )\n)\nOR\nsum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "QPS",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 9,
            "y": 2
          },
          "id": 42,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "vertical",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_inflight_connections{region=~\"$region\",job=~\"$namespace/$app-lb\"})\nOR\nsum(glm_alive_connections{region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"})",
              "hide": false,
              "legendFormat": "Total",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Concurrency",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 2,
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 10
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 11,
            "y": 2
          },
          "id": 45,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    sum(\n        rate(\n            glm_first_token_time_sum\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$__rate_interval]\n        )\n    )\n    /\n    sum(\n        rate(\n            glm_first_token_time_count\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$__rate_interval]\n        )\n    )\n) or vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "FirstTokenTime",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 4096
                  }
                ]
              },
              "unit": "tokens"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 13,
            "y": 2
          },
          "id": 46,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    sum(\n        rate(\n            glm_prompt_token_length_sum\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$__rate_interval]\n        )\n    )\n/ \n    sum(\n        rate(\n            glm_prompt_token_length_count\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$__rate_interval]\n        )\n    )\n) or vector(0)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PromptLength",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "mappings": [],
              "min": 0,
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 15,
            "y": 2
          },
          "id": 50,
          "options": {
            "legend": {
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true,
              "values": []
            },
            "pieType": "donut",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "sort": "desc",
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    count(\n        glm_watched_endpoints{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,exported_endpoint)\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Clusters",
          "type": "piechart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 2,
            "x": 17,
            "y": 2
          },
          "id": 48,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "count(\n    sum(\n        glm_watched_endpoints{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (exported_endpoint) > 0\n)",
              "hide": false,
              "instant": true,
              "legendFormat": "Watched Endpoints",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Model Servers",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "green",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "C"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "orange",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 2,
            "w": 3,
            "x": 19,
            "y": 2
          },
          "id": 166,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "text": {},
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (exported_instance)(\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"prefill\"}\n    )\n)",
              "legendFormat": "P-inst",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (exported_pod)(\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"prefill\"}\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "P-pod",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (exported_endpoint)(\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"prefill\"}\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "P-ep",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Only valid when App variable point to one.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "displayName": "Prefill DP size",
              "mappings": [],
              "min": 0,
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 2,
            "w": 2,
            "x": 22,
            "y": 2
          },
          "id": 732,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "count(\n  group by (exported_endpoint) (\n    glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"prefill\"} > 0\n  )\n)\n/\ncount(\n  group by (exported_instance) (\n    glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"prefill\"} > 0\n  )\n)",
              "hide": false,
              "instant": true,
              "legendFormat": "Watched Endpoints",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "green",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "C"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "orange",
                      "mode": "fixed"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 2,
            "w": 3,
            "x": 19,
            "y": 4
          },
          "id": 167,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (exported_instance)(\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"decode\"}\n    )\n)",
              "legendFormat": "D-inst",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (exported_pod)(\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"decode\"}\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "D-pod",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (exported_endpoint)(\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"decode\"}\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "D-ep",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Only valid when App variable point to one.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "displayName": "Decode DP Size",
              "mappings": [],
              "min": 0,
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 2,
            "w": 2,
            "x": 22,
            "y": 4
          },
          "id": 733,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "count(\n  group by (exported_endpoint) (\n    glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"decode\"} > 0\n  )\n)\n/\ncount(\n  group by (exported_instance) (\n    glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"decode\"} > 0\n  )\n)",
              "hide": false,
              "instant": true,
              "legendFormat": "Watched Endpoints",
              "range": false,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_current_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Current Replicas",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_desired_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Desired Replicas",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_spec_max_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Max Replicas",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_spec_min_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Min Replicas",
              "range": true,
              "refId": "E"
            }
          ],
          "title": "",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "note: {{region}}-mix request is not applied to PD deployment",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 134
          },
          "id": 734,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]\n    )\n) by (region)\nOR\nsum(\n    rate(\n        glm_incoming_requests{region=~\"$region\",job=~\"$namespace/$app-lb\"}\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Request QPS (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 1
                  },
                  {
                    "id": "custom.axisPlacement",
                    "value": "auto"
                  },
                  {
                    "id": "custom.axisColorMode",
                    "value": "series"
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": true
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 134
          },
          "id": 25,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_inflight_connections{region=~\"$region\",job=~\"$namespace/$app-lb\"}) by (region)\nOR\nsum(glm_alive_connections{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}) by (region)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_max_alive_connections\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region)\n*\nsum(\n    glm_watched_endpoints:count:exported_endpoint\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region)",
              "hide": true,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Alive Connections (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "linearThreshold": 1,
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "C"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        4,
                        6
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": false
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        0,
                        10
                      ],
                      "fill": "dot"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 134
          },
          "id": 60,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    sum(\n        glm_alive_connections{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,job,exported_endpoint)\n) by (region) \n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-max",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    avg(glm_inflight_connections{region=~\"$region\",job=~\"$namespace/$app-lb\"}) by (region)\n    /\n    count(glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\"})\n)\nOR\navg(\n    sum(\n        glm_alive_connections{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,job,exported_endpoint)\n) by (region) \n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-avg",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(\n    sum(\n        glm_alive_connections{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,job,exported_endpoint)\n) by (region) \n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-min",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Alive Connections (Per Endpoint By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "linearThreshold": 1,
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "noValue": "-",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "C"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        4,
                        6
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": false
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "A"
                },
                "properties": [
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        0,
                        10
                      ],
                      "fill": "dot"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 134
          },
          "id": 738,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    sum(\n        glm_alive_connections{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",exported_endpoint=~\"decode.*\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,job,exported_endpoint)\n) by (region) \n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-max",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum(\n        glm_alive_connections{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",exported_endpoint=~\"decode.*\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,job,exported_endpoint)\n) by (region) \n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-avg",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Alive Connections on Decode (Per Endpoint By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for respond first token.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 0,
            "y": 141
          },
          "id": 21,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.99,\n  sum(\n    rate(\n      glm_first_token_time_bucket{\n        job=~\"$namespace/$app-lb\",region=~\"$region\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n      }[1m]\n    )\n  ) by(le)\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.75,\n  sum(\n    rate(\n      glm_first_token_time_bucket{\n        job=~\"$namespace/$app-lb\",region=~\"$region\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n      }[1m]\n    )\n  ) by(le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    sum(\n        rate(\n            glm_first_token_time_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[1m]\n        )\n    )\n    /\n    sum(\n        rate(\n            glm_first_token_time_count\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [1m]\n        )\n    )\n) or vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "First Token Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for respond first token.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 4,
            "y": 141
          },
          "id": 35,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "  sum(\n    rate(\n      glm_first_token_time_sum{\n        region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n      }[1m]\n    )\n  ) by (region) \n/\n  sum(\n    rate(\n      glm_first_token_time_count{\n        region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n      }[1m]\n    )\n  ) by (region) ",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Avg First Token Time (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for decoding each token.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisWidth": 50,
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.15
                  },
                  {
                    "color": "orange",
                    "value": 0.5
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 8,
            "y": 141
          },
          "id": 22,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "timezone": [
              ""
            ],
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_decode_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.90, \n    sum(\n        rate(\n            glm_decode_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p90",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75,\n    sum(\n        rate(\n            glm_decode_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, \n    sum(\n        rate(\n            glm_decode_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    sum(\n        rate(\n            glm_decode_time_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) \n/ \n    sum(\n        rate(\n            glm_decode_time_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    )\n) or vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_max_decode_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p99-of-max",
              "range": true,
              "refId": "F"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, \n    sum(\n        rate(\n            glm_max_decode_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p50-of-max",
              "range": true,
              "refId": "G"
            }
          ],
          "title": "Decode Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for decoding each token.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.15
                  },
                  {
                    "color": "orange",
                    "value": 0.5
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 12,
            "y": 141
          },
          "id": 58,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_decode_time_sum\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$__rate_interval]\n        )\n    ) by (region)\n/ \n    sum(\n        rate(\n            glm_decode_time_count\n            {region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n            [$__rate_interval]\n        )\n    ) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Avg Decode Time (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Full request respond time.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 45
                  },
                  {
                    "color": "orange",
                    "value": 120
                  },
                  {
                    "color": "red",
                    "value": 300
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 16,
            "y": 141
          },
          "id": 23,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_generate_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, \n    sum(\n        rate(\n            glm_generate_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_generate_time_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) \n/ \n    sum(\n        rate(\n            glm_generate_time_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    )",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Generate Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Full request respond time.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 45
                  },
                  {
                    "color": "orange",
                    "value": 120
                  },
                  {
                    "color": "red",
                    "value": 300
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 20,
            "y": 141
          },
          "id": 59,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_generate_time_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region) \n/ \n    sum(\n        rate(\n            glm_generate_time_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region)",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Avg Generate Time (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The cache length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 0,
            "y": 148
          },
          "id": 115,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_cached_token_length_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region) \n/ \n    sum(\n        rate(\n            glm_prompt_token_length_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region)",
              "hide": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Cache Ratio (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server. （Shows decode instance only if PD-disaggregation mode)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        5,
                        10
                      ],
                      "fill": "dash"
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 4,
            "y": 148
          },
          "id": 664,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-max",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-dec-avg",
              "range": true,
              "refId": "PD-avg"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-dec-max",
              "range": true,
              "refId": "PD-max"
            }
          ],
          "title": "Token Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "blue",
                    "value": 60
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 8,
            "y": 148
          },
          "id": 106,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "  sum(\n    label_replace(\n      sum(idelta(glm_read_session_time_count{region=~\"$region\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (state),\n      \"statenew\",\"$1\",\"state\",\"(?:.*:)?(.*)\"\n    )\n  ) by (statenew)\n/\n  sum(\n    idelta(\n      glm_read_session_time_count{\n        region=~\"$region\",job=~\"$namespace/$app-lb\"\n      }[$__rate_interval]\n    )\n  )",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "[Read] {{statenew}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Session HitRate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 12,
            "y": 148
          },
          "id": 659,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "  sum(\n    label_replace(\n      sum(idelta(glm_cache_expect_ratio_count{region=~\"$region\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (state),\n      \"statenew\",\"$1\",\"state\",\"(?:.*:)?(.*)\"\n    )\n  ) by (statenew)\n/\n  sum(\n    idelta(\n      glm_cache_expect_ratio_count{\n        region=~\"$region\",job=~\"$namespace/$app-lb\"\n      }[$__rate_interval]\n    )\n  )",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "{{statenew}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Radix HitRate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The prompt length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 16,
            "y": 148
          },
          "id": 27,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_prompt_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, \n    sum(\n        rate(\n            glm_prompt_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_prompt_token_length_sum{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) \n/ \nsum(\n    rate(\n        glm_prompt_token_length_count{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, \n    sum(\n        rate(\n            glm_prompt_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.25, \n    sum(\n        rate(\n            glm_prompt_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p25",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.10, \n    sum(\n        rate(\n            glm_prompt_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p10",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Prompt Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The generate length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 20,
            "y": 148
          },
          "id": 24,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_generate_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, \n    sum(\n        rate(\n            glm_generate_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_generate_time_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) \n/ \n    sum(\n        rate(\n            glm_generate_time_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    )",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Generate Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "All Endpoints",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 0,
            "y": 155
          },
          "id": 28,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    count(\n        sum(\n            glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n        ) by (region,exported_endpoint)\n    ) by (region)\n    ,\n    sum(\n        kube_deployment_spec_replicas{region=~\"$region\",deployment=\"$app\",namespace=\"$namespace\"}\n    ) by (region)\n) by (region)",
              "hide": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Observed Endpoints (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Ready endpoints for each load balance replica",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 4,
            "y": 155
          },
          "id": 34,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    sum(\n        glm_ready_endpoints{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"\n        }\n    ) by (region,exported_endpoint) > 0\n) by (region)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Ready Endpoints (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Endpoints with slow health probe response.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 8,
            "y": 155
          },
          "id": 29,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Max",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    max(\n        glm_degrade_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"}\n    ) by (region, exported_endpoint)\n) by (region,exported_endpoint)",
              "hide": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Degrade Endpoints (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Ready endpoints for each load balance replica",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "axisPlacement": "auto",
                "fillOpacity": 45,
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineWidth": 1,
                "spanNulls": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "yellow",
                    "value": 1
                  },
                  {
                    "color": "#EF843C",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 12,
            "y": 155
          },
          "id": 657,
          "options": {
            "alignValue": "center",
            "legend": {
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "mergeValues": false,
            "rowHeight": 0.82,
            "showValue": "always",
            "tooltip": {
              "hideZeros": false,
              "mode": "multi",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    kube_pod_status_phase{\n        phase=\"Pending\",region=~\"$region\",pod=~\"$app-(?:prefill|decode)?-[a-z0-9]+-[a-z0-9]+(?:-[0-9]+)?\",namespace=\"$namespace\"\n    }\n) by (region)",
              "hide": false,
              "legendFormat": "pending-{{region}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    kube_pod_status_ready{\n        condition=\"false\",region=~\"$region\",pod=~\"$app-(?:prefill|decode)?-[a-z0-9]+-[a-z0-9]+(?:-[0-9]+)?\",namespace=\"$namespace\"\n    }\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "creating-{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "NotReady Endpoints (By Region)",
          "type": "state-timeline"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The cached length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "avg-cacheratio"
                },
                "properties": [
                  {
                    "id": "custom.axisPlacement",
                    "value": "right"
                  },
                  {
                    "id": "unit",
                    "value": "percentunit"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 16,
            "y": 155
          },
          "id": 111,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_cached_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) / sum(rate(glm_cached_token_length_count{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]))",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "F"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_cached_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_cached_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "  (\n    sum(rate(glm_cached_token_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) \n  /\n    sum(rate(glm_cached_token_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]))\n  ) \n/\n  (\n    sum(rate(glm_prompt_token_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]))\n  /\n    sum(rate(glm_prompt_token_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval]))\n  )",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-cacheratio",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.25, sum(rate(glm_cached_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p25",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.10, sum(rate(glm_cached_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p10",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(glm_cached_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "G"
            }
          ],
          "title": "Cached Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The uncached length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "avg-cacheratio"
                },
                "properties": [
                  {
                    "id": "custom.axisPlacement",
                    "value": "right"
                  },
                  {
                    "id": "unit",
                    "value": "percentunit"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 20,
            "y": 155
          },
          "id": 692,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_uncached_token_length_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",exported_endpoint=~\"prefill:.*\"\n            }[$__rate_interval]\n        )\n    ) \n/ \n    sum(\n        rate(\n            glm_uncached_token_length_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",exported_endpoint=~\"prefill:.*\"\n            }[$__rate_interval]\n        )\n    ) ",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_uncached_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, \n    sum(\n        rate(\n            glm_uncached_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.25, \n    sum(\n        rate(\n            glm_uncached_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p25",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.10, \n    sum(\n        rate(\n            glm_uncached_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p10",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, \n    sum(\n        rate(\n            glm_uncached_token_length_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Uncached Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "unit: number",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-red"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 0,
            "y": 162
          },
          "id": 36,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_failed_requests{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region,code)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{code}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed Request (By Error Code)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-red"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 4,
            "y": 162
          },
          "id": 38,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_failed_requests{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (exported_endpoint, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed Request (By Endpoint)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-red"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 8,
            "y": 162
          },
          "id": 665,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Name",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_failed_requests{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (pod, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed Request (By LB)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-red"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 12,
            "y": 162
          },
          "id": 39,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_failed_requests{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed Request (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 16,
            "y": 162
          },
          "id": 37,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \n    sum(\n        rate(\n            glm_failed_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, \n    sum(\n        rate(\n            glm_failed_time_bucket{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (le)\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_failed_time_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\"\n            }[$__rate_interval]\n        )\n    ) \n/ \n    sum(\n        rate(\n            glm_failed_time_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\"\n            }[$__rate_interval]\n        )\n    )",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Failed Request Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 20,
            "y": 162
          },
          "id": 670,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    avg_over_time(\n        tgi_queue_size{\n            region=~\"$region\",job=~\"$namespace/$app\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region)",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    avg_over_time(\n        sglang:num_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    avg_over_time(\n        sglang:num_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app-prefill\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) \n+\navg(\n    avg_over_time(\n        sglang:num_prefill_inflight_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app-prefill\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) \n+\navg(\n    avg_over_time(\n        sglang:num_prefill_prealloc_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app-prefill\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) ",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-prf",
              "range": true,
              "refId": "B-Prefill"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    avg_over_time(\n        sglang:num_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app-decode\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) \n+ \navg(\n    avg_over_time(\n        sglang:num_decode_transfer_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app-decode\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) \n+\navg(\n    avg_over_time(\n        sglang:num_decode_prealloc_queue_reqs{\n            region=~\"$region\",job=~\"$namespace/$app-decode\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) ",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-dec",
              "range": true,
              "refId": "B-Decode"
            }
          ],
          "title": "Avg Queue Size by region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 0,
            "y": 169
          },
          "id": 671,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    (\n        sum(\n            rate(\n                glm_prompt_token_length_sum{\n                    region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n                }[$__rate_interval]\n            )\n        ) by (region) \n    + \n        sum(\n            rate(\n                glm_generate_token_length_sum{\n                    region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n                }[$__rate_interval]\n            )\n        ) by (region)\n    ) \n/ \n    count(\n        sum(\n            glm_ready_endpoints{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }\n        ) by (region,exported_endpoint)\n    ) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Token Throughput / Instance (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "hue",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 4,
            "y": 169
          },
          "id": 32,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_prompt_token_length_sum{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region)\n+\nsum(\n    rate(\n        glm_generate_token_length_sum{\n            region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n        }[$__rate_interval]\n    )\n) by (region) ",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Token Throughput (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 8,
            "y": 169
          },
          "id": 727,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    (\n        sum(\n            rate(\n                glm_prompt_token_length_sum{\n                    region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n                }[$__rate_interval]\n            )\n        ) by (region) \n    + \n        sum(\n            rate(\n                glm_generate_token_length_sum{\n                    region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n                }[$__rate_interval]\n            )\n        ) by (region)\n    ) \n/ \n    sum(\n        glm_gpu_consumptions:sum{\n            region=~\"$region\",app=~\"$app|$app-prefill|$app-decode\",namespace=~\"$namespace\",workload_type!=\"\"\n        }\n    ) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Token Throughput / GPU (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "LBs",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red"
                  },
                  {
                    "color": "green",
                    "value": 0.5
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 12,
            "y": 169
          },
          "id": 30,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_gpu_consumptions:sum{region=~\"$region\",app=~\"$app\",namespace=~\"$namespace\",workload_type!=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_gpu_consumptions:sum{region=~\"$region\",app=~\"$app-prefill\",namespace=~\"$namespace\",workload_type!=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-prefill",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_gpu_consumptions:sum{region=~\"$region\",app=~\"$app-decode\",namespace=~\"$namespace\",workload_type!=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-decode",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "GPUs",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red"
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  },
                  {
                    "color": "blue",
                    "value": 0.8
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 16,
            "y": 169
          },
          "id": 660,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    avg(\n        label_replace(\n            label_replace(\n                DCGM_FI_PROF_PIPE_TENSOR_ACTIVE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n                \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n            ),\n            \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n            kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n            label_replace(\n                kube_replicaset_owner{owner_name=~\"$app\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n                \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n            )\n        )\n    ) by (region)\n) or vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    avg(\n        label_replace(\n            label_replace(\n                DCGM_FI_PROF_PIPE_TENSOR_ACTIVE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n                \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n            ),\n            \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n            kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n            label_replace(\n                kube_replicaset_owner{owner_name=~\"$app-prefill\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n                \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n            )\n        )\n    ) by (region)\n) or vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-prefill",
              "range": true,
              "refId": "B-prefill"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(\n    avg(\n        label_replace(\n            label_replace(\n                DCGM_FI_PROF_PIPE_TENSOR_ACTIVE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n                \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n            ),\n            \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n            kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n            label_replace(\n                kube_replicaset_owner{owner_name=~\"$app-decode\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n                \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n            )\n        )\n    ) by (region)\n) or vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-decode",
              "range": true,
              "refId": "B-decode"
            }
          ],
          "title": "Tensor Core Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "LBs",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red"
                  },
                  {
                    "color": "green",
                    "value": 0.5
                  }
                ]
              },
              "unit": "watt"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 20,
            "y": 169
          },
          "id": 139,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            npu_chip_info_power{region=~\"$region\"},\n            \"pod\", \"$1\", \"pod_name\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n    )\n    * on(pod, namespace) group_left()\n    (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_DEV_POWER_USAGE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n    )\n    * on(pod, namespace) group_left()\n    (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_DEV_POWER_USAGE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n    )\n    * on(pod, namespace) group_left()\n    (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app-prefill\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-prefill",
              "range": true,
              "refId": "Prefill"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_DEV_POWER_USAGE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n    )\n    * on(pod, namespace) group_left()\n    (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app-decode\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-decode",
              "range": true,
              "refId": "Decode"
            }
          ],
          "title": "GPU Power",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 1
                  },
                  {
                    "id": "custom.axisPlacement",
                    "value": "auto"
                  },
                  {
                    "id": "custom.axisColorMode",
                    "value": "series"
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": true
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 176
          },
          "id": 527,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_alive_connections\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\", exported_endpoint=~\"prefill:.*\"}\n) by (region)",
              "legendFormat": "{{label_name}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PD Prefill Alive Connections (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 1
                  },
                  {
                    "id": "custom.axisPlacement",
                    "value": "auto"
                  },
                  {
                    "id": "custom.axisColorMode",
                    "value": "series"
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": true
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 176
          },
          "id": 528,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_alive_connections\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\", exported_endpoint=~\"decode:.*\"}\n) by (region)",
              "legendFormat": "{{label_name}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PD Decode Alive Connections (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "All Endpoints (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 176
          },
          "id": 529,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (region,exported_endpoint) (\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"prefill\"}\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PD Prefill Observed Endpoints (By Region)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "All Endpoints (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 176
          },
          "id": 530,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (region,exported_endpoint) (\n        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\",conn_type=\"decode\"}\n    )\n) by (region)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PD Decode Observed Endpoints (By Region)",
          "type": "timeseries"
        }
      ],
      "title": "Load Balancer",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 2
      },
      "id": 91,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 191
          },
          "id": 89,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 68
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "hidden",
              "reverse": false
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(glm_alive_connections{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region,exported_endpoint)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Alive Connections (Per Backend)",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 29,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 1
                  },
                  {
                    "id": "custom.axisPlacement",
                    "value": "auto"
                  },
                  {
                    "id": "custom.axisColorMode",
                    "value": "series"
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": true
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 6,
            "y": 191
          },
          "id": 141,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(\n    glm_prefilling_connections\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region, pod)",
              "instant": false,
              "legendFormat": "{{region}}-prefilling-{{pod}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_decoding_connections\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region, pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-decoding-{{pod}}",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Alive Connections (By phase)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The generate length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "tokens"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "truncated-count"
                },
                "properties": [
                  {
                    "id": "custom.axisPlacement",
                    "value": "hidden"
                  },
                  {
                    "id": "unit",
                    "value": "cps"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 10,
            "y": 191
          },
          "id": 142,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_max_new_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_max_new_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le))",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_max_new_token_length_sum{truncated=\"false\", region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) \n/ \nsum(rate(glm_max_new_token_length_count{truncated=\"false\", region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Max New Tokens",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for prefilling each token.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.15
                  },
                  {
                    "color": "orange",
                    "value": 0.5
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 14,
            "y": 191
          },
          "id": 143,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_mean_token_prefill_time_sum\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (region)\n/ \nsum(\n    rate(\n        glm_mean_token_prefill_time_count\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_mean_token_prefill_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_mean_token_prefill_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "prefill time per token (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "avg-cacheratio"
                },
                "properties": [
                  {
                    "id": "custom.axisPlacement",
                    "value": "right"
                  },
                  {
                    "id": "unit",
                    "value": "percentunit"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 18,
            "y": 191
          },
          "id": 736,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "  sum(\n    rate(\n      glm_uncached_token_length_sum{\n        region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n      }[$__rate_interval]\n    )\n  ) by (region)\n/ \n  sum(\n    rate(\n      glm_uncached_token_length_count{\n        region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n      }[$__rate_interval]\n    )\n  ) by (region)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Uncached Length (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 446
          },
          "id": 708,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 68
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "hidden",
              "reverse": false
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(glm_prefilling_tokens{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region,exported_endpoint) - sum(glm_estimated_cached_tokens{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region,exported_endpoint)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Uncached Prefilling Tokens (Per Backend)",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "每个LB实例上，最近15s内对每个Endpoint最大连接数的最大值",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 6,
            "y": 446
          },
          "id": 110,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Max",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max  (\n    glm_alive_connections_max_15s\n        {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n)by (region,pod)",
              "hide": false,
              "legendFormat": "[{{region}}] {{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Max Alive Connections(Per LB By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Endpoints with slow health probe response.",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 10,
            "y": 446
          },
          "id": 90,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Reds",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "reverse": false
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(max(glm_degrade_endpoints:count:exported_endpoint{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region, exported_endpoint)) by (region)",
              "hide": true,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    max(\n        glm_degrade_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n    ) by (region, exported_endpoint)\n) by (region,exported_endpoint) > 0",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Degrade Endpoints (Per Backend)",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The finish reason of requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "truncated-count"
                },
                "properties": [
                  {
                    "id": "custom.axisPlacement",
                    "value": "hidden"
                  },
                  {
                    "id": "unit",
                    "value": "cps"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 14,
            "y": 446
          },
          "id": 159,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_finish_reason{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]\n    )\n) by (finish_reason)",
              "hide": false,
              "legendFormat": "{{finish_reason}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Finish Reason",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "unit: number",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-red"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 446
          },
          "id": 646,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_failed_requests:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (code)",
              "hide": true,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        glm_failed_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]\n    )\n) by (region,code,pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] ({{code}}) {{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Failed Request (By Error Code and LB)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "repeatness 重复度，不重复子串的占比，数值从0->1 字符串重复程度递减",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 453
          },
          "id": 1,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_repeatness_sum {region=~\"$region\", job=~\"$namespace/$app-lb\"}[1m])) \n/ \nsum(rate(glm_repeatness_count {region=~\"$region\", job=~\"$namespace/$app-lb\"}[1m]))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.01, sum(rate(glm_repeatness_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[1m])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p01",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.05, sum(rate(glm_repeatness_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[1m])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p05",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "重复度",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 6,
            "y": 453
          },
          "id": 686,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(idelta(glm_avoid_reason{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (reason)\n/\nsum(idelta(glm_requests{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval]))",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "{{statenew}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "avoid reason",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for fetch connection",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.15
                  },
                  {
                    "color": "orange",
                    "value": 0.5
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 10,
            "y": 453
          },
          "id": 658,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_cache_expect_ratio_sum\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (region)\n/ \nsum(\n    rate(\n        glm_cache_expect_ratio_count\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "radix expect ratio",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The prompt length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 14,
            "y": 453
          },
          "id": 113,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_prompt_token_length_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region) \n/ \n    sum(\n        rate(\n            glm_prompt_token_length_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Prompt Length (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The generate length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 18,
            "y": 453
          },
          "id": 114,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "    sum(\n        rate(\n            glm_generate_token_length_sum{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region) \n/ \n    sum(\n        rate(\n            glm_generate_token_length_count{\n                region=~\"$region\",job=~\"$namespace/$app-lb\",source=~\"$source\",pool=~\"^$|^($pool1);($pool2);($pool3);;;$\"\n            }[$__rate_interval]\n        )\n    ) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Generate Length (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "每个LB实例上，最近15s内对每个Endpoint最大连接数的平均值",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 460
          },
          "id": 109,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Max",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    glm_alive_connections_max_15s\n        {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region,pod) \n* on(region) group_left\nsum(\n    glm_watched_endpoints:count:exported_endpoint{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region)  ",
              "hide": false,
              "legendFormat": "[{{region}}] {{pod}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    glm_alive_connections_max_15s\n        {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region,pod,exported_endpoint) ",
              "hide": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "glm_alive_connections_max_15s\n        {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}",
              "hide": true,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Avg Max Alive Connections(Per LB By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "计算max length- max new tokens 与 prompt tokens比较得到被截断请求数量",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.002
                  },
                  {
                    "color": "red",
                    "value": 0.005
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "count"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 6,
            "y": 460
          },
          "id": 724,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_max_new_token_length_count{truncated=\"true\", region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "count",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "被截断请求数量",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "repeat ratio 重复占比，最长重复子串占出现后字符串比例，越高表示复读概率越高",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 10,
            "y": 460
          },
          "id": 122,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_repeat_ratio_sum {region=~\"$region\", job=~\"$namespace/$app-lb\"}[1m])) \n/ \nsum(rate(glm_repeat_ratio_count {region=~\"$region\", job=~\"$namespace/$app-lb\"}[1m]))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_repeat_ratio_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[1m])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_repeat_ratio_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[1m])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "重复占比LRS",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.15
                  },
                  {
                    "color": "orange",
                    "value": 0.5
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 14,
            "y": 460
          },
          "id": 165,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_radix_operation_time_sum\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (operation, region)\n/ \nsum(\n    rate(\n        glm_radix_operation_time_count\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (operation, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{operation}}-{{region}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_radix_operation_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le,operation))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99-{{operation}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "radix opearation time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 1
                  },
                  {
                    "id": "custom.axisPlacement",
                    "value": "auto"
                  },
                  {
                    "id": "custom.axisColorMode",
                    "value": "series"
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": true
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 3,
            "w": 6,
            "x": 18,
            "y": 460
          },
          "id": 123,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_alive_connections:sum\n    {region=~\"$region\",job=~\"$namespace/$app-interceptor\",cluster=\"\"}\n) by (region)\n-\nsum(\n    glm_alive_connections:sum\n    {region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}\n) by (region)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Connections In Interceptor (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "reasoing content 的长度",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 463
          },
          "id": 140,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_reasoning_token_length_sum{region=~\"$region\", job=~\"$namespace/$app-lb\"}[1m])) by (region)\n/ \nsum(rate(glm_reasoning_token_length_count{region=~\"$region\", job=~\"$namespace/$app-lb\"}[1m])) by (region)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_reasoning_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[1m])) by (le))",
              "hide": true,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_reasoning_token_length_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[1m])) by (le))",
              "hide": true,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Reasoning Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Endpoints with slow health probe response.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 467
          },
          "id": 92,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Max",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, \nsum by(le,region,exported_endpoint) (rate(glm_first_token_time_bucket{region=~\"$region\",job=\"$namespace/$app-lb\"}[$__rate_interval])))",
              "hide": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "FirstTokenTime P99 (Per Backend)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The uncached length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "avg-cacheratio"
                },
                "properties": [
                  {
                    "id": "custom.axisPlacement",
                    "value": "right"
                  },
                  {
                    "id": "unit",
                    "value": "percentunit"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 6,
            "y": 467
          },
          "id": 713,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_uncached_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\",exported_endpoint=~\"prefill:.*\"}[$__rate_interval]))  by (exported_endpoint)/ sum(rate(glm_uncached_token_length_count{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\",exported_endpoint=~\"prefill:.*\"}[$__rate_interval])) by (exported_endpoint)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Prefill Uncached Length by instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "大模型可能会一直输出重复的内容。统计重复度低于threshold 并且 输出token长度高于min_length的异常重复度case格式",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.002
                  },
                  {
                    "color": "red",
                    "value": 0.005
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": [
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "count"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 14,
            "y": 467
          },
          "id": 108,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_anomaly_repeat_count{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval])) / sum(increase(glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "count",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_anomaly_repeat_count_by_lrs{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval])) / sum(increase(glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "count-lrs",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_anomaly_repeat_count{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval])) / sum(increase(glm_finish_reason{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\", finish_reason=\"length\"}[$__rate_interval]))",
              "hide": true,
              "instant": false,
              "legendFormat": "count",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "异常重复请求占比",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "大模型可能会一直输出重复的内容。统计重复度低于threshold 并且 输出token长度高于min_length的异常重复度case格式",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "count"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 470
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_anomaly_repeat_count{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "count",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_anomaly_repeat_count_by_lrs{region=~\"$region\",job=~\"$namespace/$app-lb\", cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "count-lrs",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "异常重复请求数",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The generate length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 4,
            "y": 474
          },
          "id": 735,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_cached_token_length_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (region) \n/ \nsum(rate(glm_cached_token_length_count{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",source=~\"$source\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Cached Length (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for fetch connection",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.15
                  },
                  {
                    "color": "orange",
                    "value": 0.5
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": [
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "avg-nm03-tob-glm-4p7-lb-75d9b566f9-24hqj",
                      "avg-nm03-tob-glm-4p7-lb-75d9b566f9-v66fx",
                      "avg-nm06-tob-glm-4p7-lb-84dcb94b6c-6llks",
                      "avg-nm06-tob-glm-4p7-lb-84dcb94b6c-k4lkz",
                      "avg-nm06-tob-glm-4p7-lb-84dcb94b6c-s8sqd",
                      "avg-nm06-tob-glm-4p7-lb-84dcb94b6c-xnwrj",
                      "p75"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 8,
            "y": 474
          },
          "id": 164,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_fetch_connection_time_sum\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (region, pod)\n/ \nsum(\n    rate(\n        glm_fetch_connection_time_count\n        {region=~\"$region\",job=~\"$namespace/$app-lb\"}\n        [$__rate_interval]\n    )\n) by (region, pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{region}}-{{pod}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_fetch_connection_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_fetch_connection_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "fetch connection time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red"
                  },
                  {
                    "color": "yellow",
                    "value": 0.5
                  },
                  {
                    "color": "blue",
                    "value": 0.8
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 14,
            "y": 474
          },
          "id": 661,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_PROF_DRAM_ACTIVE{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "DRAM Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "B"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "red",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        10,
                        10
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.fillOpacity",
                    "value": 0
                  },
                  {
                    "id": "custom.lineWidth",
                    "value": 1
                  },
                  {
                    "id": "custom.axisPlacement",
                    "value": "auto"
                  },
                  {
                    "id": "custom.axisColorMode",
                    "value": "series"
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": true
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 18,
            "y": 477
          },
          "id": 116,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    glm_alive_connections:sum\n    {region=~\"$region\",job=~\"$namespace/$app-interceptor\",cluster=\"\"}\n) by (region)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Interceptor Alive Connections (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "LBs",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red"
                  },
                  {
                    "color": "green",
                    "value": 0.5
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 12,
            "y": 481
          },
          "id": 138,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "clamp_max(\n    avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_DEV_GPU_UTIL{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)\n,100)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "NV"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_DEV_GPU_UTIL{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app-prefill\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-prefill",
              "range": true,
              "refId": "Prefill"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            DCGM_FI_DEV_GPU_UTIL{job=\"nvidia-dcgm-exporter\", region=~\"$region\"},\n            \"pod\", \"$1\", \"exported_pod\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app-decode\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}-decode",
              "range": true,
              "refId": "Decode"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    label_replace(\n        label_replace(\n            npu_chip_info_power{region=~\"$region\"},\n            \"pod\", \"$1\", \"pod_name\", \"(.+)\"\n        ),\n        \"namespace\", \"$1\", \"exported_namespace\", \"(.+)\"\n        )\n        * on(pod, namespace) group_left()\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n            and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{owner_name=~\"$app\", owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\"},\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "NPU"
            }
          ],
          "title": "GPU Utils",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "linearThreshold": 1,
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byFrameRefID",
                  "options": "C"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    }
                  },
                  {
                    "id": "custom.lineStyle",
                    "value": {
                      "dash": [
                        4,
                        6
                      ],
                      "fill": "dash"
                    }
                  },
                  {
                    "id": "custom.axisBorderShow",
                    "value": false
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 4,
            "x": 18,
            "y": 481
          },
          "id": 666,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": false
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_alive_connections{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}) by (region) \n/ \ncount(\n    sum(glm_ready_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}) by (region,exported_endpoint)\n) by (region)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Avg Ready Connections (Per Backend By Cluster)",
          "type": "timeseries"
        }
      ],
      "title": "Load Balancer Extra",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 3
      },
      "id": 124,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of requests processed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 2142
          },
          "id": 125,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        sglang:num_requests_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "SGL Request",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 2142
          },
          "id": 126,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:generation_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:generation_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "total",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Generated Token Speed",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 2142
          },
          "id": 127,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (region) (sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "G"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Total",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(sglang:num_grammar_queue_reqs{region=~\"$region\",job=~\"$namespace/$app(|-decode|-prefill)\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "num_grammar_queue_reqs",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(sglang:num_prefill_prealloc_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill_prealloc_queue_sum",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(sglang:num_prefill_infight_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill_infight_queue_sum",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The average request queue latency for the last batch of requests in seconds. ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 2142
          },
          "id": 128,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Min",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill:Avg",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "decode:Avg",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill:Max",
              "range": true,
              "refId": "F"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "decode:Max",
              "range": true,
              "refId": "G"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill:Min",
              "range": true,
              "refId": "H"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "decode:Min",
              "range": true,
              "refId": "I"
            }
          ],
          "title": "Queue Lantency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "End-to-end request latency in seconds",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 2150
          },
          "id": 129,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (job)(rate(sglang:e2e_request_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum by (job)(rate(sglang:e2e_request_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "{{job}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(sglang:e2e_request_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(sglang:e2e_request_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "E2E Request Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "time to first token in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 2150
          },
          "id": 107,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.99,\n  sum by (le) (\n      rate(\n        sglang:time_to_first_token_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.75,\n  sum by (le) (\n      rate(\n        sglang:time_to_first_token_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (region) (\n  rate(\n    sglang:time_to_first_token_seconds_sum\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)\n/\nsum by (region) (\n  rate(\n    sglang:time_to_first_token_seconds_count\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "F"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n  rate(\n    sglang:time_to_first_token_seconds_sum\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)\n/\nsum(\n  rate(\n    sglang:time_to_first_token_seconds_count\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Time To First Token",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "inter-token latency in seconds. inter-token即输出token间延迟，即decode latency",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 2150
          },
          "id": 130,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:inter_token_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(sglang:inter_token_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) * 1000",
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(sglang:inter_token_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(sglang:inter_token_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Inter Token Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server. ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 2150
          },
          "id": 131,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Token Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of running requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 2158
          },
          "id": 132,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg:{{region}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "max:{{region}}",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": true,
              "instant": false,
              "legendFormat": "sum:{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Running Requests",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of prefill tokens processed",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 2158
          },
          "id": 133,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "sum:{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg:{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Prefill Throughput",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 2158
          },
          "id": 134,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sglang:gen_throughput{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg:{{region}}",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    sglang:gen_throughput{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "max:{{region}}",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    sglang:gen_throughput{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "sum:{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Generation Throughput",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Rate of number of cached prompt tokens.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 2158
          },
          "id": 135,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:cached_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)",
              "instant": false,
              "legendFormat": "sum:{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:cached_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg:{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Cached Tokens",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The prefix cache hit rate.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 2166
          },
          "id": 136,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg(sglang:cache_hit_rate{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}) by (region)",
              "format": "heatmap",
              "instant": false,
              "interval": "",
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Prefix Cache HitRate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tokens"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 2166
          },
          "id": 662,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg((sglang:evictable_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}+sglang:num_used_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}))",
              "instant": false,
              "legendFormat": "L1 Cache",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:host_used_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "L2 Cache",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:host_total_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "L2 Space",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Token Spaces",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The average acceptance length of speculative decoding.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": true,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 2166
          },
          "id": 137,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:spec_accept_length{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (region)",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Accept Length Of Speculative",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "inter-token latency in seconds. inter-token即输出token间延迟，即decode latency",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 2174
          },
          "id": 144,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:inter_token_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region)\n/\nsum(rate(sglang:inter_token_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region) * 1000",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Inter Token Latency (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server. ",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 2174
          },
          "id": 145,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Token Usage (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server. ",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 2174
          },
          "id": 148,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 2,
              "unit": "percentunit"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "RdYlGn",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 2,
              "reverse": false,
              "unit": "percentunit"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (pod, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}]{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Token Usage",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 2182
          },
          "id": 146,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:gen_throughput{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)\n+\navg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Token Throughput / Instance (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 2182
          },
          "id": 147,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:inter_token_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region) / sum(rate(sglang:inter_token_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region)",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Average Decode TPS / Thread (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 8,
            "x": 0,
            "y": 2190
          },
          "id": 656,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 68
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "hidden",
              "reverse": false
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(glm_alive_connections{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region,exported_endpoint)",
              "format": "time_series",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{exported_endpoint}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Alive Connections (Per Backend)",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 9,
            "x": 8,
            "y": 2190
          },
          "id": 150,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Running Request",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 7,
            "x": 17,
            "y": 2190
          },
          "id": 149,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Queue Size",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 0,
            "y": 2206
          },
          "id": 154,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(sglang:total_retracted_reqs{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Retracted Requests (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 5,
            "y": 2206
          },
          "id": 155,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(sglang:num_aborted_requests_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Aborted Requests (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 10,
            "y": 2206
          },
          "id": 156,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sgl_router_generate_duration_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-sglrouter\"}[$__rate_interval])) \n/\nsum(rate(sgl_router_generate_duration_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-sglrouter\"}[$__rate_interval])) * 1000",
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(sgl_router_generate_duration_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-sglrouter\"}[$__rate_interval]))) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(sgl_router_generate_duration_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-sglrouter\"}[$__rate_interval]))) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Router Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 14,
            "y": 2206
          },
          "id": 157,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    sgl_router_active_workers{region=~\"$region\",job=~\"$namespace/$app-sglrouter\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Router active worker",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 2206
          },
          "id": 158,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}: prefill",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sglang:gen_throughput{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}: decode",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "P&D Throughput / Instance (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "time to first token in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 2214
          },
          "id": 690,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.99,\n  sum by (le) (\n      rate(\n        sglang:time_to_tokenize_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.75,\n  sum by (le) (\n      rate(\n        sglang:time_to_tokenize_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n  rate(\n    sglang:time_to_tokenize_seconds_sum\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)\n/\nsum(\n  rate(\n    sglang:time_to_tokenize_seconds_count\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Time To Tokenize",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "time to first token in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 2214
          },
          "id": 691,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.99,\n  sum by (le) (\n      rate(\n        sglang:vit_embedding_time_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\",tp_rank=\"1\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.75,\n  sum by (le) (\n      rate(\n        sglang:vit_embedding_time_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n  rate(\n    sglang:vit_embedding_time_seconds_sum\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)\n/\nsum(\n  rate(\n    sglang:vit_embedding_time_seconds_count\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n)",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Time To ViT embedding",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "time to first token in seconds.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 2214
          },
          "id": 715,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.90,\n  sum by (le, name) (\n      rate(\n        sglang:func_latency_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p90-{{name}}",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n  rate(\n    sglang:func_latency_seconds_sum\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )\n) by (name)\n/\nsum(\n  rate(\n    sglang:func_latency_seconds_count\n    {cluster=\"\",job=~\"$namespace/$app\",region=~\"$region\"}[1m]\n  )  \n) by (name)",
              "hide": false,
              "legendFormat": "avg-{{name}}",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Time To Func Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Latency per stage",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": [
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "avg: prefill_waiting"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 2222
          },
          "id": 726,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app\"})[$__interval]) by (stage)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg: {{stage}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval]) by (le))",
              "hide": true,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval]) by (le))",
              "hide": true,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval]) by (le))",
              "hide": true,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "Per-stage Latency",
          "type": "timeseries"
        }
      ],
      "title": "SGL Performance",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 4
      },
      "id": 500,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 5
          },
          "id": 728,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(\n    group by (label0,label1) (\n        label_replace(\n            label_replace(\n                label_replace(\n                    sum by (exported_endpoint)(\n                        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}\n                    ) > 0,\n                    \"label0\", \"$1\",\n                    \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n                    ),\n                \"label1\", \"$2\",\n                \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n            ),\n            \"label2\", \"$3\",\n        \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n        )\n    )\n)",
              "legendFormat": "Total",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PD Instance",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 5
          },
          "id": 730,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count by (label0)(\n    count by (label0,label1) (\n        label_replace(\n            label_replace(\n                label_replace(\n                    sum by (exported_endpoint)(\n                        glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}\n                    ) > 0,\n                    \"label0\", \"$1\",\n                    \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n                    ),\n                \"label1\", \"$2\",\n                \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n            ),\n            \"label2\", \"$3\",\n        \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n        )\n    )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "PD Instance",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 5
          },
          "id": 729,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count(sum(glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}) by (exported_endpoint) > 0)",
              "legendFormat": "Total",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Pods by dprank",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 5
          },
          "id": 731,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "count by (label0) (\n    label_replace(\n        label_replace(\n            label_replace(\n                sum by (exported_endpoint)(\n                    glm_watched_endpoints{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",pool =~ \"^$|^($pool1);($pool2);($pool3);;;$\"}\n                ) > 0,\n                \"label0\", \"$1\",\n                \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n                ),\n            \"label1\", \"$2\",\n            \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n        ),\n        \"label2\", \"$3\",\n    \"exported_endpoint\", \"^([^:]+):([^:]+)(?::([^:]+))?$\"\n    )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Pods by dprank",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "End-to-end request latency in seconds (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 13
          },
          "id": 602,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (job)(rate(sglang:e2e_request_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"}[$__rate_interval])) \n/\nsum by (job)(rate(sglang:e2e_request_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(sglang:e2e_request_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(sglang:e2e_request_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C_P"
            }
          ],
          "title": "[Prefill] E2E Request Latency in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of requests processed. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 13
          },
          "id": 601,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        sglang:num_requests_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A_P"
            }
          ],
          "title": "[Prefill] SGL Request",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "time to first token in seconds. (Prefill-Decode disaggregated) \nIn PD-disaggregated mode, decode instance is responsible for output the first token",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 13
          },
          "id": 632,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n0.99,\n  sum by (le) (\n      rate(\n        sglang:time_to_first_token_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app-decode\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(\n  0.75,\n  sum by (le) (\n      rate(\n        sglang:time_to_first_token_seconds_bucket\n      {cluster=\"\",job=~\"$namespace/$app-decode\",region=~\"$region\"}[1m]\n      )\n  )\n)",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n  rate(\n    sglang:time_to_first_token_seconds_sum\n    {cluster=\"\",job=~\"$namespace/$app-decode\",region=~\"$region\"}[1m]\n  )  \n)\n/\nsum(\n  rate(\n    sglang:time_to_first_token_seconds_count\n    {cluster=\"\",job=~\"$namespace/$app-decode\",region=~\"$region\"}[1m]\n  )  \n)",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "F_D"
            }
          ],
          "title": "[Decode] Time To First Token",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "first-token latency in seconds.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 13
          },
          "id": 640,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:time_to_first_token_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) by (region)\n/\nsum(rate(sglang:time_to_first_token_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) by (region) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Decode] First Token Latency (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "End-to-end request latency in seconds (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 21
          },
          "id": 606,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(sglang:e2e_request_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(sglang:e2e_request_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (job)(rate(sglang:e2e_request_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) \n/\nsum by (job)(rate(sglang:e2e_request_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Decode] E2E Request Latency in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of requests processed. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 21
          },
          "id": 605,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        sglang:num_requests_total{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval]\n    )\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] SGL Request",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "inter-token latency in seconds. inter-token即输出token间延迟，即decode latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 21
          },
          "id": 633,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:inter_token_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) \n/\nsum(rate(sglang:inter_token_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) * 1000",
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(sglang:inter_token_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval]))) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(sglang:inter_token_latency_seconds_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval]))) * 1000",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C_D"
            }
          ],
          "title": "[Decode] Inter Token Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "inter-token latency in seconds. inter-token即输出token间延迟，即decode latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ms"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 21
          },
          "id": 635,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:inter_token_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"}[$__rate_interval])) by (region)\n/\nsum(rate(sglang:inter_token_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"}[$__rate_interval])) by (region) * 1000",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:inter_token_latency_seconds_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) by (region)\n/\nsum(rate(sglang:inter_token_latency_seconds_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-decode\"}[$__rate_interval])) by (region) * 1000",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Inter Token Latency (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of running requests. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 29
          },
          "id": 610,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "B_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "C_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "sum",
              "range": true,
              "refId": "A_P"
            }
          ],
          "title": "[Prefill] Running Requests in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 29
          },
          "id": 609,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A_P"
            }
          ],
          "title": "[Prefill] Running Request",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 29
          },
          "id": 604,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Name",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "num_queue",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_prefill_prealloc_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill_prealloc_queue",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_prefill_inflight_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prefill_infight_queue",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "[Prefill] Avg Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 29
          },
          "id": 641,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Prefill] Queue Size",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of running requests. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 37
          },
          "id": 614,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "B_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "C_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "sum",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Running Requests in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 37
          },
          "id": 613,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Running Request",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 37
          },
          "id": 608,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "decode queue",
              "range": true,
              "refId": "A_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_decode_prealloc_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "prealloc_queue",
              "range": true,
              "refId": "G"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:num_decode_transfer_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) ",
              "hide": false,
              "instant": false,
              "legendFormat": "transfer_queue",
              "range": true,
              "refId": "H"
            }
          ],
          "title": "[Decode] Avg Queues Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 37
          },
          "id": 638,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_decode_transfer_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Transfer Queue Size",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 0,
            "y": 45
          },
          "id": 649,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod)(sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "num_queue {{pod}}",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod)(sglang:num_prefill_prealloc_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "prefill_prealloc_queue {{pod}}",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (sglang:num_prefill_inflight_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "prefill_infight_queue {{pod}}",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Prefill] Queue Size By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 4,
            "y": 45
          },
          "id": 650,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod)(sglang:num_prefill_prealloc_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": " {{pod}}",
              "range": true,
              "refId": "K"
            }
          ],
          "title": "[Prefill] Pre-Alloc Queue Size By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the transferring queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 8,
            "y": 45
          },
          "id": 651,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (sglang:num_prefill_inflight_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Prefill] Inflight Queue Size By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 12,
            "y": 45
          },
          "id": 652,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (pod) (sglang:num_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "{{sum}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 16,
            "y": 45
          },
          "id": 654,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (pod)(sglang:num_decode_prealloc_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "G"
            }
          ],
          "title": "[Decode] Pre-Alloc Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The number of requests in the waiting queue. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 20,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 20,
            "y": 45
          },
          "id": 655,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (pod) (sglang:num_decode_transfer_queue_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "H"
            }
          ],
          "title": "[Decode] Transfer Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side bootstrap latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 53
          },
          "id": 673,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Prefill] Bootstrap Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side waiting latency, request is bootstrapped but waiting other request forwarded (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 53
          },
          "id": 676,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Prefill] Waiting Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side forward latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 53
          },
          "id": 675,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Prefill] Forward Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side KV cache transfer latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 53
          },
          "id": 672,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Prefill] Transfer KV Cache Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Decode-side prepare latency, prepare is the fisrt stage in decode instance, before bootstrap.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 61
          },
          "id": 678,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_prepare\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_prepare\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_prepare\"})[$__rate_interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_prepare\"})[$__rate_interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_prepare\"})[$__rate_interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Decode] Prepare Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Decode-side bootstrap latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 61
          },
          "id": 677,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_bootstrap\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_bootstrap\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_bootstrap\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_bootstrap\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_bootstrap\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Decode] Bootstrap Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Decode-side latency before KV cache is transferred. This includes all latency in prefill to bootstrap+forward+transfer. See prefill-side transfer latency for pure transfer latency.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 61
          },
          "id": 679,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Decode] Transferred Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Decode-side waiting latency, request is bootstrapped but waiting for batching with other request to forward, if this is high, typically the token usage is full or max_running_request is hit.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 61
          },
          "id": 680,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_waiting\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_waiting\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_waiting\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "I"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_waiting\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "K"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.50, sum(rate(sglang:per_stage_req_latency_seconds_bucket{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_waiting\"})[$__interval]) by (le))",
              "hide": false,
              "instant": false,
              "legendFormat": "p50",
              "range": true,
              "refId": "L"
            }
          ],
          "title": "[Decode] Waiting Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side bootstrap latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 0,
            "y": 69
          },
          "id": 681,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__rate_interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_bootstrap\"})[$__rate_interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Prefill] Bootstrap Latency By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side forward latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 4,
            "y": 69
          },
          "id": 682,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_forward\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Prefill] Forward Latency By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side wait latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 8,
            "y": 69
          },
          "id": 714,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_waiting\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Prefill] Wait Latency By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Prefill-side transfer latency (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 69
          },
          "id": 683,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-prefill\",stage=\"prefill_transfer_kv_cache\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Prefill] Transfer Latency By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Decode-side latency before KV cache is transferred. This includes all latency in prefill to bootstrap+forward+transfer. See prefill-side transfer latency for pure transfer latency.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 69
          },
          "id": 684,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (pod) (rate(sglang:per_stage_req_latency_seconds_sum{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval] / rate(sglang:per_stage_req_latency_seconds_count{region=~\"$region\",job=~\"$namespace/$app-decode\",stage=\"decode_transferred\"})[$__interval])",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Decode] Transferred Latency By Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 77
          },
          "id": 626,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "B_P"
            }
          ],
          "title": "[Prefill] Token Usage in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 77
          },
          "id": 625,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_P"
            }
          ],
          "title": "[Prefill] Token Usage (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 77
          },
          "id": 639,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 2,
              "unit": "percentunit"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "RdYlGn",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 2,
              "reverse": false,
              "unit": "percentunit"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}) by (pod, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}]{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Prefill] Token Usage",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Rate of number of cached prompt tokens. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 77
          },
          "id": 617,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:cached_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "sum",
              "range": true,
              "refId": "A_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:cached_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "B_P"
            }
          ],
          "title": "[Prefill] Cached Tokens",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 85
          },
          "id": 630,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "A_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "B_D"
            }
          ],
          "title": "[Decode] Token Usage in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "fieldMinMax": true,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 85
          },
          "id": 629,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Token Usage (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 85
          },
          "id": 636,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 2,
              "unit": "percentunit"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "RdYlGn",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 2,
              "reverse": false,
              "unit": "percentunit"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) by (pod, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}]{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Token Usage",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The prefix cache hit rate. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 85
          },
          "id": 618,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg(sglang:cache_hit_rate{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-prefill\"})",
              "format": "heatmap",
              "instant": false,
              "interval": "",
              "legendFormat": "hit rate",
              "range": true,
              "refId": "A_P"
            }
          ],
          "title": "[Prefill] Prefix Cache HitRate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of prefill tokens processed (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 93
          },
          "id": 611,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "sum",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "[Prefill] Prefill Throughput in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 93
          },
          "id": 612,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval])) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Prefill] Token Throughput / Instance (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of prefill tokens processed. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "fieldMinMax": true,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 93
          },
          "id": 647,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval])) by (pod, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}]{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Prefill] Thoughput",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 3,
            "x": 18,
            "y": 93
          },
          "id": 623,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(sglang:num_aborted_requests_total{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval])\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Aborted Requests (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 3,
            "x": 21,
            "y": 93
          },
          "id": 619,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(sglang:num_aborted_requests_total{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval])\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_P"
            }
          ],
          "title": "[Prefill] Aborted Requests (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 101
          },
          "id": 615,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:generation_tokens_total{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max (rate(sglang:generation_tokens_total{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "max",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum (rate(sglang:generation_tokens_total{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "sum",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Decode] Generation Throughput in $region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "tps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 101
          },
          "id": 628,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sglang:gen_throughput{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "[Decode] Throughput / Instance (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Number of decode tokens generated.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "fieldMinMax": true,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 101
          },
          "id": 648,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(sglang:prompt_tokens_total{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval])) by (pod, region)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}]{{pod}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Thoughput",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "reqps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 101
          },
          "id": 637,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(sglang:total_retracted_reqs{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"}[$__rate_interval])\n) by (region)",
              "hide": true,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(sglang:total_retracted_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}[$__rate_interval])\n) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Retracted Requests (by Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "binbps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 109
          },
          "id": 643,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (region,node) (irate(\n        node_infiniband_port_data_transmitted_bytes_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ) * 8)\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-prefill\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(\n    sum by (region,node) (irate(\n        node_infiniband_port_data_transmitted_bytes_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ) * 8)\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-prefill\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "min-{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "[Prefill] Avg iB Xmit Speed",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "pps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 109
          },
          "id": 667,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (region,node) (irate(\n        node_infiniband_port_packets_transmitted_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ))\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-prefill\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(\n    sum by (region,node) (irate(\n        node_infiniband_port_packets_transmitted_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ))\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-prefill\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "min-{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "[Prefill] Avg iB Xmit Packet Rate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "binbps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 109
          },
          "id": 644,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (region,node) (irate(\n        node_infiniband_port_data_transmitted_bytes_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ) * 8)\n    * on(node) group_left(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-prefill\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, pod)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}/{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Prefill] Avg iB Xmit Speed",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The average acceptance length of speculative decoding. (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": true,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 109
          },
          "id": 622,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg by (region) (sglang:spec_accept_length{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "decode-{{region}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Accept Length Of Speculative",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "binbps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 117
          },
          "id": 642,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (region,node) (irate(\n        node_infiniband_port_data_received_bytes_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ) * 8)\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-decode\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(\n    sum by (region,node) (irate(\n        node_infiniband_port_data_received_bytes_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ) * 8)\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-decode\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "min-{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "[Decode] Avg iB Recv Speed",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "pps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 117
          },
          "id": 668,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (region,node) (irate(\n        node_infiniband_port_packets_received_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ))\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-decode\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "avg-{{region}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(\n    sum by (region,node) (irate(\n        node_infiniband_port_packets_received_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ))\n    * on(node) group_right(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-decode\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, owner_name)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "min-{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "[Decode] Avg iB Recv Packet Rate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "binbps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 117
          },
          "id": 645,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (region,node) (irate(\n        node_infiniband_port_data_received_bytes_total{\n        region=~\"$region\", device=~\"mlx5_.*\"\n        }[$__rate_interval]\n    ) * 8)\n    * on(node) group_left(pod, namespace)\n    (\n        kube_pod_info{region=~\"$region\"}\n        and on(pod, namespace)\n        (\n        kube_pod_owner{owner_kind=\"ReplicaSet\", region=~\"$region\"}\n        and on(owner_name, namespace)\n        label_replace(\n            kube_replicaset_owner{\n            owner_kind=\"Deployment\", namespace=~\"$namespace\", region=~\"$region\", owner_name=~\"$app-decode\",\n            },\n            \"owner_name\", \"$1\", \"replicaset\", \"(.*)\"\n        )\n        )\n    )\n) by (region, namespace, pod)\n",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}/{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Decode] Avg iB Recv Speed",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The average request queue latency for the last batch of requests in seconds.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 3,
            "x": 18,
            "y": 117
          },
          "id": 603,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Min",
              "range": true,
              "refId": "C_P"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "F"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-prefill\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Min",
              "range": true,
              "refId": "H"
            }
          ],
          "title": "[Prefill] Queue Lantency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The average request queue latency for the last batch of requests in seconds.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 3,
            "x": 21,
            "y": 117
          },
          "id": 607,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Min",
              "range": true,
              "refId": "C_D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "G"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "min(sglang:avg_request_queue_latency{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Min",
              "range": true,
              "refId": "I"
            }
          ],
          "title": "[Decode] Queue Lantency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 125
          },
          "id": 739,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:token_usage{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) by (region,pod,dp_rank)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{pod}} / {{dp_rank}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Token Usage (By DP Rank)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "indicates the KV cache memory utilization of the server.  (Prefill-Decode disaggregated)",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 125
          },
          "id": 740,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(sglang:num_running_reqs{region=~\"$region\",job=~\"$namespace/$app-decode\",cluster=\"\"}) by (region,pod,dp_rank)",
              "hide": false,
              "instant": false,
              "legendFormat": "[{{region}}] {{pod}} / {{dp_rank}}",
              "range": true,
              "refId": "A_D"
            }
          ],
          "title": "[Decode] Running Req Num (By DP Rank)",
          "type": "timeseries"
        }
      ],
      "title": "PD Performance",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 5
      },
      "id": 693,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Total RX + TX bandwidth for all Decode and Prefill pods",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 400
                  },
                  {
                    "color": "red",
                    "value": 800
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 2855
          },
          "id": 694,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum(\n    rate(container_network_receive_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-(decode|prefill).*\"\n    }[5m]) +\n    rate(container_network_transmit_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-(decode|prefill).*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Total Pod Bandwidth",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 200000000
                  },
                  {
                    "color": "red",
                    "value": 400000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 2855
          },
          "id": 695,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum(\n    rate(container_network_receive_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-(decode|prefill).*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Pod Network Receive Rate",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 200000000
                  },
                  {
                    "color": "red",
                    "value": 400000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 2855
          },
          "id": 696,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum(\n    rate(container_network_transmit_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-(decode|prefill).*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Pod Network Transmit Rate",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 30
                  },
                  {
                    "color": "red",
                    "value": 150
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 2855
          },
          "id": 697,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum(rate(container_network_receive_bytes_total{namespace=\"$namespace\",pod=~\"$app-(decode|prefill).*\"}[5m]))\n/\nsum(rate(container_network_transmit_bytes_total{namespace=\"$namespace\",pod=~\"$app-(decode|prefill).*\"}[5m]))",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Pod RX/TX Ratio",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Individual RX rate for each Decode pod",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 200000000
                  },
                  {
                    "color": "red",
                    "value": 400000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 2862
          },
          "id": 698,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (pod) (\n    rate(container_network_receive_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-decode.*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Decode Pods RX Rate per Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 2862
          },
          "id": 699,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (pod) (\n    rate(container_network_transmit_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-decode.*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Decode Pods TX Rate per Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 2862
          },
          "id": 700,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (pod) (\n    rate(container_network_receive_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-prefill.*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Prefill Pods RX Rate per Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 2862
          },
          "id": 701,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (pod) (\n    rate(container_network_transmit_bytes_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-prefill.*\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Prefill Pods TX Rate per Instance",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 200000000
                  },
                  {
                    "color": "red",
                    "value": 400000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 2933
          },
          "id": 702,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "max(\n    sum by (pod) (\n        rate(container_network_receive_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-decode.*\"\n        }[5m])\n    )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (pod) (\n        rate(container_network_receive_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-decode.*\"\n        }[5m])\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg_over_time(\n    (sum(\n        rate(container_network_receive_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-decode.*\"\n        }[5m])\n    ))[5m:]\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Decode Pods RX - Max/Avg/Mean",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 2933
          },
          "id": 703,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "max(\n    sum by (pod) (\n        rate(container_network_transmit_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-decode.*\"\n        }[5m])\n    )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (pod) (\n        rate(container_network_transmit_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-decode.*\"\n        }[5m])\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg_over_time(\n    (sum(\n        rate(container_network_transmit_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-decode.*\"\n        }[5m])\n    ))[5m:]\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Decode Pods TX - Max/Avg/Mean",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 2933
          },
          "id": 704,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "max(\n    sum by (pod) (\n        rate(container_network_receive_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-prefill.*\"\n        }[5m])\n    )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (pod) (\n        rate(container_network_receive_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-prefill.*\"\n        }[5m])\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg_over_time(\n    (sum(\n        rate(container_network_receive_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-prefill.*\"\n        }[5m])\n    ))[5m:]\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Prefill Pods RX - Max/Avg/Mean",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "binBps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 2933
          },
          "id": 705,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "max(\n    sum by (pod) (\n        rate(container_network_transmit_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-prefill.*\"\n        }[5m])\n    )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(\n    sum by (pod) (\n        rate(container_network_transmit_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-prefill.*\"\n        }[5m])\n    )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg_over_time(\n    (sum(\n        rate(container_network_transmit_bytes_total{\n            namespace=\"$namespace\",\n            pod=~\"$app-prefill.*\"\n        }[5m])\n    ))[5m:]\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Prefill Pods TX - Max/Avg/Mean",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 200000000
                  },
                  {
                    "color": "red",
                    "value": 400000000
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 2940
          },
          "id": 706,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (instance, node) (\n  rate(node_infiniband_port_data_received_bytes_total[1m])\n)\n*\non (node)\ngroup_left()\n(\n  count by (node) (\n    kube_pod_info{\n      namespace=\"$namespace\",\n      pod=~\"$app-decode.*\"\n    }\n  ) > 0\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "IB RX（Decode Scoped)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 2940
          },
          "id": 707,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (instance, node) (\n  rate(node_infiniband_port_data_transmitted_bytes_total[1m])\n)\n*\non (node)\ngroup_left()\n(\n  count by (node) (\n    kube_pod_info{\n      namespace=\"$namespace\",\n      pod=~\"$app-decode.*\"\n    }\n  ) > 0\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "IB TX（Decode Scoped)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 2940
          },
          "id": 711,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (instance, node) (\n  rate(node_infiniband_port_data_received_bytes_total[1m])\n)\n*\non (node)\ngroup_left()\n(\n  count by (node) (\n    kube_pod_info{\n      namespace=\"$namespace\",\n      pod=~\"$app-prefill.*\"\n    }\n  ) > 0\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "IB RX（Prefill Scoped)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 2940
          },
          "id": 712,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "sum by (instance, node) (\n  rate(node_infiniband_port_data_transmitted_bytes_total[1m])\n)\n*\non (node)\ngroup_left()\n(\n  count by (node) (\n    kube_pod_info{\n      namespace=\"$namespace\",\n      pod=~\"$app-prefill.*\"\n    }\n  ) > 0\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "IB TX（Prefill Scoped)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 2947
          },
          "id": 709,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "(\n  sum by(instance, node) (\n    rate(node_infiniband_port_data_received_bytes_total[1m])\n  )\n  *\n  on(node)\n  group_left()\n  (\n    count by(node) (\n      kube_pod_info{\n        namespace=\"$namespace\",\n        pod=~\"$app-(decode|prefill).*\"\n      }\n    ) > 0\n  )\n)\n/\n(\n  sum by(instance, node) (\n    rate(node_infiniband_port_data_transmitted_bytes_total[1m])\n  )\n  *\n  on(node)\n  group_left()\n  (\n    count by(node) (\n      kube_pod_info{\n        namespace=\"$namespace\",\n        pod=~\"$app-(decode|prefill).*\"\n      }\n    ) > 0\n  )\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "IB RX/TX Ratio",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 10000000
                  },
                  {
                    "color": "red",
                    "value": 20000000
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 2947
          },
          "id": 710,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "editorMode": "code",
              "expr": "max by (instance, node) (\n  rate(node_infiniband_port_transmit_wait_total[1m])\n)\n*\non (node)\ngroup_left()\n(\n  count by (node) (\n    kube_pod_info{\n      namespace=\"$namespace\",\n      pod=~\"$app-decode.*\"\n    }\n  ) > 0\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "InfiniBand Network Transmit Wait",
          "type": "timeseries"
        }
      ],
      "title": "PD Network",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 6
      },
      "id": 716,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": ""
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 0,
            "y": 2709
          },
          "id": 717,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_cache_queued_requests{\n    namespace=\"$namespace\",\n    pod=~\"$app-interceptor.*\"\n})",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Queue Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": ""
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 6,
            "y": 2709
          },
          "id": 723,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(glm_cache_lb_total_capacity{\n    namespace=\"$namespace\",\n    pod=~\"$app-interceptor.*\"\n})",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "LB total capacity",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "yellow",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 12,
            "y": 2709
          },
          "id": 725,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(glm_cache_lb_available_capacity{\n    namespace=\"$namespace\",\n    pod=~\"$app-interceptor.*\"\n})",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "LB available capacity",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "yellow",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 18,
            "y": 2709
          },
          "id": 718,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_alive_connections{\n    namespace=\"$namespace\",\n    pod=~\"$app-interceptor.*\"\n})",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Alive Connections",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "yellow",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 0,
            "y": 2715
          },
          "id": 719,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum by (reason) (\n    rate(glm_cache_rejected_requests_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-interceptor.*\"\n    }[5m])\n)\n",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Rejected requests",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "yellow",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 6,
            "y": 2715
          },
          "id": 722,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(glm_cache_rejected_requests_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-interceptor.*\",\n        reason=\"max_connections\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Rejected] Max connections",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "yellow",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 12,
            "y": 2715
          },
          "id": 721,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(glm_cache_rejected_requests_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-interceptor.*\",\n        reason=\"queue_full\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Rejected] Queue full",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "green",
                    "value": ""
                  },
                  {
                    "color": "yellow",
                    "value": ""
                  },
                  {
                    "color": "red",
                    "value": 50
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 6,
            "x": 18,
            "y": 2715
          },
          "id": 720,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(glm_cache_rejected_requests_total{\n        namespace=\"$namespace\",\n        pod=~\"$app-interceptor.*\",\n        reason=\"queue_timeout\"\n    }[5m])\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "[Rejected] Queue timeout",
          "type": "stat"
        }
      ],
      "title": "Interceptor",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 7
      },
      "id": 63,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "cps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 0,
            "y": 1586
          },
          "id": 64,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_success{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Success",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_count{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "Total",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_failure{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) OR on() vector(0)",
              "hide": false,
              "instant": false,
              "legendFormat": "Failure",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Tgi Requests",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "cps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 4,
            "x": 5,
            "y": 1586
          },
          "id": 65,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(rate(tgi_request_generated_tokens_sum{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_generated_tokens_sum{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "Total",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Generated Token Speed",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 9,
            "y": 1586
          },
          "id": 66,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(tgi_queue_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_queue_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(tgi_queue_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Total",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Current Queue Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 14,
            "y": 1586
          },
          "id": 669,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(tgi_queue_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (region)",
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Queue Size by region",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time for requests waiting in queue.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "fieldMinMax": false,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 5,
            "x": 19,
            "y": 1586
          },
          "id": 67,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_queue_duration_bucket{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])))",
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_queue_duration_bucket{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_queue_duration_sum{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval])) / sum(rate(tgi_request_queue_duration_count{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Queue Time",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "__systemRef": "hideSeriesFrom",
                "matcher": {
                  "id": "byNames",
                  "options": {
                    "mode": "exclude",
                    "names": [
                      "Max",
                      "Avg"
                    ],
                    "prefix": "All except:",
                    "readOnly": true
                  }
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 1594
          },
          "id": 68,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(tgi_batch_current_max_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_batch_current_max_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_batch_max_total_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "max_batch_total_tokens",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Current Max Tokens in Batch",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 2,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 1594
          },
          "id": 69,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "avg(tgi_batch_current_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_batch_current_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "Max",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Current Batch Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 1594
          },
          "id": 70,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_input_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_request_input_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_input_length_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_input_length_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Input Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 1594
          },
          "id": 71,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_generated_tokens_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_request_generated_tokens_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_generated_tokens_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_generated_tokens_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Generated Token Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 1602
          },
          "id": 72,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_duration_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_request_duration_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Request Duration",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 1602
          },
          "id": 73,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_inference_duration_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_request_inference_duration_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_inference_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_inference_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Request Inference Duration",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 1602
          },
          "id": 74,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_batch_inference_duration_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_batch_inference_duration_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_batch_inference_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_batch_inference_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Batch Inference Duration",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 1602
          },
          "id": 75,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_validation_duration_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_request_validation_duration_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_validation_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_validation_duration_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Validation Duration",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tokens"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 1610
          },
          "id": 103,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_request_input_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_request_input_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_request_input_length_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_request_input_length_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Request Input Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "decimals": 0,
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "tokens"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 1610
          },
          "id": 104,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(tgi_prefix_cache_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) \n/\nsum(rate(tgi_prefix_cache_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(tgi_prefix_cache_length_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(tgi_prefix_cache_length_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Request Cache Prefix Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "decimals": 0,
              "mappings": [],
              "max": 1,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  },
                  {
                    "color": "green",
                    "value": 0.5
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 1610
          },
          "id": 105,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "max",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(sum(rate(tgi_prefix_cache_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region)\n/\nsum(rate(tgi_prefix_cache_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval]))by (region)) /\n(sum(rate(tgi_request_input_length_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region)\n/\nsum(rate(tgi_request_input_length_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app\"}[$__rate_interval])) by (region) )",
              "instant": false,
              "legendFormat": "Avg",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Request Cache Prefix Ratio",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "tgi_accepted_ratio means average accepted ratio for speculation scenario in rate_interval.\n2 means accept 2 speculate tokens",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 18,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 1618
          },
          "id": 160,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg(tgi_accepted_ratio{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]) by (region) - 1 ",
              "format": "heatmap",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Avg Speculate Accept Ratio",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "tgi_token_usage Token usage ratio, from 0.0 to 1.0",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "axisSoftMin": 0,
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 18,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 1618
          },
          "id": 161,
          "options": {
            "legend": {
              "calcs": [
                "mean",
                "lastNotNull"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "avg(tgi_token_usage{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}[$__rate_interval]) by (region)",
              "format": "heatmap",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Token Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              },
              "fieldMinMax": true
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 1618
          },
          "id": 153,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "RdYlGn",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_batch_current_max_tokens{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "batch max tokens",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              },
              "fieldMinMax": true
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 0,
            "y": 1626
          },
          "id": 151,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_queue_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Queue Size",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              },
              "fieldMinMax": true
            },
            "overrides": []
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 1634
          },
          "id": 152,
          "options": {
            "calculate": false,
            "cellGap": 1,
            "cellValues": {
              "decimals": 0,
              "unit": "none"
            },
            "color": {
              "exponent": 0.5,
              "fill": "dark-orange",
              "mode": "scheme",
              "reverse": true,
              "scale": "exponential",
              "scheme": "Oranges",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": true
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "mode": "single",
              "showColorScale": false,
              "yHistogram": false
            },
            "yAxis": {
              "axisPlacement": "left",
              "decimals": 0,
              "reverse": false,
              "unit": "none"
            }
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "max(tgi_batch_current_size{region=~\"$region\",job=~\"$namespace/$app\",cluster=\"\"}) by (pod)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Current batch size",
          "type": "heatmap"
        }
      ],
      "title": "Performance",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 8
      },
      "id": 117,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "bars",
                "fillOpacity": 100,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 6,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 4355
          },
          "id": 118,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(increase(glm_function_call_request_count{job=~\"$namespace/$app-lb\"}[1d] offset -1d)) by (region)",
              "instant": false,
              "interval": "1d",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "timeFrom": "7d",
          "title": "Daily Requests",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 4355
          },
          "id": 119,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n  rate(glm_function_call_request_count{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])\n)",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "QPS",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 4355
          },
          "id": 685,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "(\n  sum(rate(glm_function_call_response_tool_count_count{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval]))\n) \n/ \n(\n  sum(rate(glm_function_call_request_count{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval]))\n)",
              "instant": false,
              "interval": "",
              "legendFormat": "ratio",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "trigger rate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 4363
          },
          "id": 120,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.99, sum by(le) (rate(glm_function_call_request_tool_count_bucket{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])))",
              "instant": false,
              "interval": "",
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.75, sum by(le) (rate(glm_function_call_request_tool_count_bucket{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(glm_function_call_request_tool_count_sum{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) / sum(rate(glm_function_call_request_tool_count_count{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Request Tool Count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 4363
          },
          "id": 121,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.99, sum by(le) (rate(glm_function_call_response_tool_count_bucket{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])))",
              "instant": false,
              "interval": "",
              "legendFormat": "p99",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "histogram_quantile(0.75, sum by(le) (rate(glm_function_call_response_tool_count_bucket{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(rate(glm_function_call_response_tool_count_bucket{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) / sum(rate(glm_function_call_response_tool_count_bucket{region=~\"$region\",namespace=~\"$namespace\",job=~\"$namespace/$app-lb\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Response Tool Count",
          "type": "timeseries"
        }
      ],
      "title": "Function Call",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 9
      },
      "id": 80,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "media content size",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "KiBs"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 6377
          },
          "id": 81,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_mmd_content_size_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"image|video|audio\"}[$__rate_interval])) by (type)",
              "instant": false,
              "legendFormat": "sum_{{type}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_mmd_content_size_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"out_image|out_video_frame|out_audio\"}[$__rate_interval])) by (type)",
              "hide": false,
              "instant": false,
              "legendFormat": "sum_{{type}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Media Content Size",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "avg media content size by request",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "kbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 6377
          },
          "id": 82,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_mmd_content_size_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"out_image|out_video_frame|out_audio\"}[$__rate_interval])) by (type) / \nsum(rate(glm_mmd_content_size_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"out_image|out_video_frame|out_audio\"}[$__rate_interval])) by (type)",
              "instant": false,
              "legendFormat": "{{type}}: avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_mmd_content_size_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"image|video|audio\"}[$__rate_interval])) by (type) / sum(rate(glm_mmd_content_size_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"image|video|audio\"}[$__rate_interval])) by (type)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{type}}: avg",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(rate(glm_mmd_content_size_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le, type))",
              "hide": false,
              "instant": false,
              "legendFormat": "{{type}}: p99",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(rate(glm_mmd_content_size_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le, type))",
              "hide": false,
              "instant": false,
              "legendFormat": "{{type}}: p75",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Media Content Size (By Request)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "media content number",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 6377
          },
          "id": 83,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_mmd_content_num_sum{region=~\"$region\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (type) / sum(rate(glm_mmd_content_num_count{region=~\"$region\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (type)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{type}}: avg",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "ceil(histogram_quantile(0.99, sum(rate(glm_mmd_content_num_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le, type)))",
              "hide": false,
              "instant": false,
              "legendFormat": "{{type}}: p99",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "ceil(histogram_quantile(0.75, sum(rate(glm_mmd_content_num_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval])) by (le, type)))",
              "hide": false,
              "instant": false,
              "legendFormat": "{{type}}: p75",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Media Content",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Time": "",
                  "image": ""
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for convert content.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 6377
          },
          "id": 84,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le) (rate(glm_convert_mmd_content_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage=\"\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le) (rate(glm_convert_mmd_content_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage=\"\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_convert_mmd_content_time_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage=\"\"}[$__rate_interval])) / sum(rate(glm_convert_mmd_content_time_count{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage=\"\"}[$__rate_interval]))",
              "hide": false,
              "instant": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Convert Content Time",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Time": "",
                  "image": ""
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "media content size",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 6385
          },
          "id": 85,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_write_session_time_sum{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (state) \n/ \nsum(rate(glm_write_session_time_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (state)",
              "instant": false,
              "legendFormat": "[Write] {{state}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_read_session_time_sum{region=~\"$region\",cluster=\"\",job=\"$namespace/$app-lb\"}[$__rate_interval])) by (state) \n/ \nsum(rate(glm_read_session_time_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (state)",
              "hide": false,
              "instant": false,
              "legendFormat": "[READ] {{state}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Session IO Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "media content size",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 6385
          },
          "id": 86,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by (le, state)(rate(glm_write_session_time_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])))",
              "instant": false,
              "legendFormat": "[Write] {{state}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by (le, state)(rate(glm_read_session_time_bucket{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "[READ] {{state}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Session IO P99 Latency",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 25,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "percent"
                },
                "thresholdsStyle": {
                  "mode": "line"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "blue",
                    "value": 60
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 6385
          },
          "id": 87,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(label_replace(\n  sum(idelta(glm_read_session_time_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\"}[$__rate_interval])) by (state),\n  \"statenew\",\n  \"$1\",\n  \"state\",\n  \"(?:.*:)?(.*)\"\n)) by (statenew)",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "[Read] {{statenew}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Session Cache Read",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for convert content.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 6385
          },
          "id": 88,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum by(le, stage) (rate(glm_convert_mmd_content_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage!=\"\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "{{stage}}: p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum by(le, stage) (rate(glm_convert_mmd_content_time_bucket{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage!=\"\"}[$__rate_interval])))",
              "hide": false,
              "instant": false,
              "legendFormat": "{{stage}}: p75",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(rate(glm_convert_mmd_content_time_sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage!=\"\"}[$__rate_interval])) by (stage) / sum(rate(glm_convert_mmd_content_time_count{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\",stage!=\"\"}[$__rate_interval])) by (stage)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{stage}}: avg",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "Convert Content Time (By Stage)",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Time": "",
                  "image": ""
                }
              }
            }
          ],
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 6393
          },
          "id": 101,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(sum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]\n    )\n)by (region) - sum(rate(glm_mmd_content_size_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=\"image\"}[$__rate_interval]))by (region)) ",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}} without image",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Request QPS Without Image",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 6393
          },
          "id": 102,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(sum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]\n    )\n)by (region) - sum(rate(glm_mmd_content_size_count{region=~\"$region\",cluster=\"\",job=~\"$namespace/$app-lb\",type=~\"image|video|audio\"}[$__rate_interval]))by (region)) ",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}} without multimodal",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Request QPS Without Muitimodal",
          "type": "timeseries"
        }
      ],
      "title": "Multimodal",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 10
      },
      "id": 76,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 6908
          },
          "id": 77,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate{region=~\"$region\",namespace=~\"$namespace\",pod=~\"$app-lb.*\",container!=\"\"}) by (container,pod)",
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    kube_pod_container_resource_requests{job=\"kube-state-metrics\", region=~\"$region\",namespace=~\"$namespace\",pod=~\"$app-lb.*\", resource=\"cpu\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "requests",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    kube_pod_container_resource_requests{job=\"kube-state-metrics\", region=~\"$region\",namespace=~\"$namespace\",pod=~\"$app-lb.*\", resource=\"cpu\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "limits",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "CPU Usage",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 6908
          },
          "id": 78,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Max",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    increase(\n        container_cpu_cfs_throttled_periods_total\n        {job=\"kubelet\", metrics_path=\"/metrics/cadvisor\", namespace=~\"$namespace\", pod=~\"$app-lb.*\", container!=\"\", region=~\"$region\"}\n        [$__rate_interval]\n    )\n) by (container,pod,region) \n/\nsum(\n    increase(\n        container_cpu_cfs_periods_total\n        {job=\"kubelet\", metrics_path=\"/metrics/cadvisor\", namespace=~\"$namespace\", pod=~\"$app-lb.*\", container!=\"\", region=~\"$region\"}\n        [$__rate_interval]\n    )\n) by (container,pod,region)",
              "instant": false,
              "legendFormat": "{{pod}} / {{region}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "CPU Throttling",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 6908
          },
          "id": 79,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(container_memory_working_set_bytes{region=~\"$region\",namespace=~\"$namespace\",pod=~\"$app-lb.*\",container!=\"\"}) by (container,pod)",
              "instant": false,
              "legendFormat": "{{pod}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    kube_pod_container_resource_requests{job=\"kube-state-metrics\", region=~\"$region\",namespace=~\"$namespace\",pod=~\"$app-lb.*\", resource=\"memory\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "requests",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    kube_pod_container_resource_requests{job=\"kube-state-metrics\", region=~\"$region\",namespace=~\"$namespace\",pod=~\"$app-lb.*\", resource=\"memory\",cluster=\"\"}\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "limits",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Memory Usage",
          "type": "timeseries"
        }
      ],
      "title": "Compute Resources",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 11
      },
      "id": 93,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 30,
                "gradientMode": "opacity",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "c/s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 0,
            "y": 4763
          },
          "id": 94,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Last *",
              "sortDesc": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.0.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_requests:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region)",
              "hide": true,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(\n    rate(\n        glm_requests{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$__rate_interval]\n    )\n) by (region, job)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{region}} - {{job}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Request QPS (By Cluster)",
          "type": "timeseries"
        }
      ],
      "title": "Request By APP",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 12
      },
      "id": 95,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 0.001
                  },
                  {
                    "color": "red",
                    "value": 0.1
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 3,
            "x": 0,
            "y": 6906
          },
          "id": 96,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "(sum(rate(glm_failed_requests:sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$interval])) / sum(rate(glm_requests:sum{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}[$interval]))) OR on() vector(0)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Error",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                }
              },
              "mappings": [],
              "min": 0,
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 3,
            "x": 3,
            "y": 6906
          },
          "id": 97,
          "options": {
            "legend": {
              "displayMode": "table",
              "placement": "right",
              "showLegend": true,
              "values": [
                "percent"
              ]
            },
            "pieType": "donut",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_watched_endpoints:count:exported_endpoint{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region)",
              "hide": false,
              "instant": false,
              "legendFormat": "{{label_name}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Clusters",
          "type": "piechart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Time cost for respond first token.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 2
                  },
                  {
                    "color": "orange",
                    "value": 5
                  },
                  {
                    "color": "red",
                    "value": 15
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 6,
            "y": 6906
          },
          "id": 99,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_first_token_time_sum:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region) / sum(glm_first_token_time_count:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region)",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Avg First Token Time (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "Full request respond time.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 45
                  },
                  {
                    "color": "orange",
                    "value": 120
                  },
                  {
                    "color": "red",
                    "value": 300
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 12,
            "y": 6906
          },
          "id": 100,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_generate_time_sum:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region) \n/ \nsum(glm_generate_time_count:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (region)",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Generate Time (By Cluster)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "The prompt length for requests.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "#EAB839",
                    "value": 1024
                  },
                  {
                    "color": "orange",
                    "value": 2048
                  },
                  {
                    "color": "red",
                    "value": 8192
                  }
                ]
              },
              "unit": "tokens"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 6,
            "x": 18,
            "y": 6906
          },
          "id": 98,
          "options": {
            "legend": {
              "calcs": [
                "lastNotNull",
                "mean",
                "max"
              ],
              "displayMode": "table",
              "placement": "bottom",
              "showLegend": true,
              "sortBy": "Mean",
              "sortDesc": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_prompt_token_length_sum:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) / sum(glm_prompt_token_length_count:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"})",
              "hide": false,
              "legendFormat": "avg",
              "range": true,
              "refId": "F"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.99, sum(glm_prompt_token_length_bucket:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (le))",
              "hide": false,
              "legendFormat": "p99",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "histogram_quantile(0.75, sum(glm_prompt_token_length_bucket:sum:rate:1m{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (le))",
              "hide": false,
              "legendFormat": "p75",
              "range": true,
              "refId": "E"
            }
          ],
          "title": "Prompt Length",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 3,
            "x": 0,
            "y": 6913
          },
          "id": 162,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "horizontal",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_watched_endpoints:count:exported_endpoint{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (cluster, exported_endpoint)",
              "hide": true,
              "legendFormat": "Watched Endpoints",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_current_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Current Replicas",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_desired_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Desired Replicas",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_spec_max_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Max Replicas",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_spec_min_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Min Replicas",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_current_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})\n/\nsum(kube_horizontalpodautoscaler_spec_max_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "HPA 容量比",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "adwdo55ioasqoc"
          },
          "description": "hpa current / hpa max",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue"
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 3,
            "x": 3,
            "y": 6913
          },
          "id": 163,
          "options": {
            "minVizHeight": 75,
            "minVizWidth": 75,
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "sizing": "auto"
          },
          "pluginVersion": "10.4.0",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(glm_watched_endpoints:count:exported_endpoint{region=~\"$region\",job=~\"$namespace/$app-lb\",cluster=\"\"}) by (cluster, exported_endpoint)",
              "hide": true,
              "legendFormat": "Watched Endpoints",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_current_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Current Replicas",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_desired_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Desired Replicas",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_spec_max_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Max Replicas",
              "range": true,
              "refId": "D"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_spec_min_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": true,
              "instant": false,
              "legendFormat": "Min Replicas",
              "range": true,
              "refId": "E"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "adwdo55ioasqoc"
              },
              "editorMode": "code",
              "expr": "sum(kube_horizontalpodautoscaler_status_current_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})\n/\nsum(kube_horizontalpodautoscaler_spec_max_replicas{namespace=~\"$namespace\", horizontalpodautoscaler=~\"keda-hpa-$app\",region=~\"$region\"})",
              "hide": false,
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "F"
            }
          ],
          "title": "HPA 容量比",
          "type": "gauge"
        }
      ],
      "title": "SRE TroubleShooting",
      "type": "row"
    }
  ],
  "preload": false,
  "refresh": "30s",
  "schemaVersion": 41,
  "tags": [],
  "templating": {
    "list": [
      {
        "allValue": ".*",
        "current": {
          "text": [
            "fj01"
          ],
          "value": [
            "fj01"
          ]
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "query_result(sum by (region) (glm_requests))",
        "includeAll": true,
        "label": "Region",
        "multi": true,
        "name": "region",
        "options": [],
        "query": {
          "qryType": 3,
          "query": "query_result(sum by (region) (glm_requests))",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "/\"(.*)\"/",
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": ".*",
        "current": {
          "text": [
            "tob"
          ],
          "value": [
            "tob"
          ]
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "query_result(sum by (namespace) (glm_requests{region=~\"$region\"}))",
        "includeAll": true,
        "label": "Namespace",
        "multi": true,
        "name": "namespace",
        "options": [],
        "query": {
          "qryType": 3,
          "query": "query_result(sum by (namespace) (glm_requests{region=~\"$region\"}))",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "/\"(.*)\"/",
        "type": "query"
      },
      {
        "allValue": ".*",
        "allowCustomValue": true,
        "current": {
          "text": [
            "tob-glm-5-mooncake"
          ],
          "value": [
            "tob-glm-5-mooncake"
          ]
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "query_result(sum by (job) (glm_requests{region=~\"$region\", job=~\"${namespace}/.+\"}))",
        "includeAll": true,
        "label": "App",
        "multi": true,
        "name": "app",
        "options": [],
        "query": {
          "qryType": 3,
          "query": "query_result(sum by (job) (glm_requests{region=~\"$region\", job=~\"${namespace}/.+\"}))",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "/.+/(.+)-lb/",
        "type": "query"
      },
      {
        "current": {
          "text": "",
          "value": ""
        },
        "label": "LogID",
        "name": "log_id",
        "options": [
          {
            "selected": true,
            "text": "",
            "value": ""
          }
        ],
        "query": "",
        "type": "textbox"
      },
      {
        "auto": false,
        "auto_count": 30,
        "auto_min": "10s",
        "current": {
          "text": "3m",
          "value": "3m"
        },
        "label": "Interval",
        "name": "interval",
        "options": [
          {
            "selected": true,
            "text": "3m",
            "value": "3m"
          },
          {
            "selected": false,
            "text": "5m",
            "value": "5m"
          },
          {
            "selected": false,
            "text": "10m",
            "value": "10m"
          }
        ],
        "query": "3m,5m,10m",
        "refresh": 2,
        "type": "interval"
      },
      {
        "allValue": ".*",
        "current": {
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\"},source)",
        "description": "描述流量的来源，默认是model key",
        "includeAll": true,
        "label": "source",
        "multi": true,
        "name": "source",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\"},source)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "type": "query"
      },
      {
        "allValue": "[^;]*",
        "current": {
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\", source=~\"$source\"},pool)",
        "description": "level 1 routing pool for sla routing",
        "includeAll": true,
        "label": "pool-1",
        "multi": true,
        "name": "pool1",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\", source=~\"$source\"},pool)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "([^;]*);.*",
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": "[^;]*",
        "current": {
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\", source=~\"$source\", pool=~\"${pool1}.*\"},pool)",
        "description": "level 2 routing pool for sla routing",
        "includeAll": true,
        "label": "pool-2",
        "multi": true,
        "name": "pool2",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\", source=~\"$source\", pool=~\"${pool1}.*\"},pool)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "[^;]*;([^;]*);.*",
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": "[^;]*",
        "current": {
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "adwdo55ioasqoc"
        },
        "definition": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\", source=~\"$source\", pool=~\"${pool1};${pool2};.*\"},pool)",
        "description": "level 3 routing pool for sla routing",
        "includeAll": true,
        "label": "pool-3",
        "multi": true,
        "name": "pool3",
        "options": [],
        "query": {
          "qryType": 1,
          "query": "label_values(glm_generate_time_sum{region=~\"$region\", job=~\"${namespace}/${app}-lb\", source=~\"$source\", pool=~\"${pool1};${pool2};.*\"},pool)",
          "refId": "PrometheusVariableQueryEditor-VariableQuery"
        },
        "refresh": 1,
        "regex": "[^;]*;[^;]*;([^;]*);.*",
        "sort": 1,
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "now-3h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "",
  "title": "GLM API PD",
  "uid": "tgi",
  "version": 9
}